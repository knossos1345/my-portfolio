"use client";
import React, { useEffect, useState } from "react";

interface RainProps {
  show: boolean;
}

interface Raindrop {
  x: number;
  y: number;
  o: number;
  a: number;
  d: number;
  s: number;
}

const Rain: React.FC<RainProps> = ({ show }) => {
  const droplets = 250;
  const [raindrops, setRaindrops] = useState<Raindrop[]>([]);

  useEffect(() => {
    const generateRaindrops = () => {
      return Array.from({ length: droplets }).map(() => ({
        x: Math.floor(Math.random() * 100),
        y: Math.floor(Math.random() * 100),
        o: Math.random(),
        a: Math.random() + 0.5,
        d: Math.random() * 2 - 1,
        s: Math.random(),
      }));
    };
    
    setRaindrops(generateRaindrops());
  }, []);

  return (
    <div className={show ? `rain show` : 'rain'}>
      <svg
      className="clouds"
        width="662"
        height="150"
        viewBox="0 0 662 150"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g clipPath="url(#clip0_117_2)">
          <path
            className="cloud cloud-1"
            fillRule="evenodd"
            clipRule="evenodd"
            d="M217.518 34.0123C214.432 34.2311 211.533 35.0999 208.965 36.4721C205.226 30.7601 198.676 26.9694 191.223 26.9694C183.771 26.9694 177.001 30.8891 173.301 36.7558C167.318 32.3719 159.891 29.7802 151.846 29.7802C140.228 29.7802 129.913 35.1827 123.376 43.5508C118.915 41.6038 113.989 40.5208 108.793 40.5208C89.027 40.5208 73 56.1609 73 75.463C73 94.7608 89.02 110.398 108.78 110.405C114.423 110.403 119.769 109.114 124.524 106.846C125.465 113.886 131.628 119.341 139.107 119.341C142.833 119.341 146.224 117.974 148.816 115.743C151.407 122.951 158.421 128.108 166.686 128.108C177.143 128.108 185.614 119.831 185.614 109.632C185.614 109 185.589 108.381 185.524 107.775C188.606 108.961 191.971 109.632 195.478 109.632C210.422 109.632 222.529 97.8079 222.529 83.225C222.529 80.3239 222.039 77.5389 221.163 74.9343C222.605 74.7944 224.005 74.5126 225.346 74.1032C224.199 77.3788 223.574 80.8915 223.574 84.5532C223.574 102.411 238.415 116.904 256.711 116.904C268.676 116.904 279.146 110.715 284.974 101.444C287.579 103.971 291.176 105.544 295.148 105.544C300.795 105.544 305.669 102.372 308.041 97.7693C311.342 99.9613 315.326 101.238 319.62 101.238C322.883 101.238 325.968 100.498 328.709 99.1819C331.404 112.741 343.632 122.977 358.314 122.977C363.381 122.977 368.152 121.752 372.342 119.599C375.501 124.369 380.994 127.528 387.235 127.528C395.912 127.528 403.133 121.429 404.654 113.384C407.775 116.079 411.888 117.716 416.375 117.716C426.161 117.716 434.104 109.967 434.104 100.413C434.104 99.6519 434.052 98.8911 433.949 98.1562C436.734 98.9814 439.687 99.4327 442.743 99.4327C450.932 99.4327 458.357 96.2485 463.791 91.0793C462.994 97.4144 466.598 103.788 472.927 106.369C476.383 107.775 480.032 107.788 483.281 106.705C482.958 114.351 487.51 121.778 495.169 124.898C504.852 128.843 515.825 124.382 519.68 114.931C519.912 114.351 520.118 113.771 520.299 113.177C522.71 115.447 525.56 117.329 528.822 118.657C542.657 124.292 558.336 117.909 563.828 104.41C564.924 101.728 565.518 98.9684 565.685 96.2091C565.852 96.259 566.02 96.3068 566.187 96.3524C570.717 106.8 581.32 114.131 593.677 114.131C604.444 114.131 613.882 108.561 619.117 100.219C621.464 102.501 624.7 103.907 628.271 103.907C633.352 103.907 637.748 101.057 639.876 96.9054C642.854 98.8781 646.439 100.039 650.307 100.039C660.429 100.039 668.642 92.1347 668.861 82.3096C685.61 82.2451 699.174 68.9774 699.174 52.6023C699.174 36.2271 685.546 22.895 668.745 22.895C665.496 22.895 662.376 23.3978 659.436 24.3133C656.728 16.4867 649.147 10.8521 640.224 10.8521C635.312 10.8521 630.799 12.5541 627.292 15.3908C619.994 8.04129 609.769 3.46399 598.461 3.46399C576.656 3.46399 558.909 20.4212 558.3 41.5509C557.581 41.1566 556.832 40.7992 556.053 40.4821C549.039 37.6197 541.406 38.7415 535.759 42.7772C531.878 36.4593 525.972 31.2631 518.52 28.2201C507.766 23.8362 496.162 24.9451 486.956 30.2315C483.564 26.7502 479.4 23.8878 474.59 21.9279C456.281 14.4753 435.535 22.9079 428.25 40.7787C427.684 42.1671 427.216 43.5715 426.843 44.9847C422.487 47.6319 418.873 51.3338 416.375 55.7227C411.398 46.1555 401.225 39.5796 389.478 39.5796C383.638 39.5796 378.188 41.2015 373.57 44.0044C371.295 27.9654 357.168 15.5584 340.082 15.5584C336.472 15.5584 333.004 16.1129 329.742 17.1444C326.737 8.45396 318.318 2.20046 308.389 2.20046C302.935 2.20046 297.92 4.09585 294.026 7.24194C285.916 -0.919837 274.569 -6 261.998 -6C238.58 -6 219.366 11.621 217.518 34.0123Z"
            fill="#007762"
            fillOpacity="0.30"
          />
          <path
            className="cloud cloud-2"
            fillRule="evenodd"
            clipRule="evenodd"
            d="M431.896 11.6647C432.67 11.9794 433.415 12.3339 434.13 12.7247C434.744 -8.40085 452.489 -25.3533 474.291 -25.3533C485.599 -25.3533 495.824 -20.776 503.122 -13.4265C506.629 -16.2631 511.142 -17.9651 516.054 -17.9651C524.977 -17.9651 532.558 -12.3305 535.266 -4.50399C538.206 -5.41945 541.326 -5.92231 544.575 -5.92231C561.376 -5.92231 575.005 7.40989 575.005 23.785C575.005 40.1601 561.44 53.4279 544.691 53.4923C544.472 63.3174 536.259 71.2213 526.137 71.2213C522.269 71.2213 518.684 70.0609 515.706 68.0881C513.579 72.2399 509.182 75.0895 504.102 75.0895C500.53 75.0895 497.294 73.684 494.947 71.4018C489.712 79.7441 480.274 85.3142 469.508 85.3142C457.148 85.3142 446.544 77.9811 442.015 67.531C441.853 67.4866 441.69 67.4402 441.528 67.3918C441.361 70.151 440.767 72.9103 439.671 75.5922C434.179 89.092 418.5 95.4745 404.665 89.8399C401.403 88.5118 398.553 86.6293 396.142 84.36C395.961 84.9531 395.755 85.5333 395.523 86.1136C391.668 95.5647 380.695 100.026 371.012 96.0805C363.353 92.9602 358.801 85.5333 359.124 77.8873C355.875 78.9704 352.226 78.9575 348.77 77.5521C342.435 74.9685 338.842 68.5857 339.639 62.2451C334.203 67.4242 326.771 70.6154 318.573 70.6154C315.517 70.6154 312.564 70.1641 309.779 69.3389C309.882 70.0739 309.934 70.8346 309.934 71.5953C309.934 81.1496 301.991 88.8988 292.205 88.8988C287.718 88.8988 283.605 87.2613 280.484 84.5665C278.963 92.6122 271.742 98.711 263.065 98.711C256.824 98.711 251.332 95.552 248.173 90.7813C243.982 92.9346 239.211 94.1595 234.144 94.1595C220.959 94.1595 209.753 85.9047 205.653 74.4007C204.609 84.5518 195.834 92.4831 185.148 92.4831C180.854 92.4831 176.87 91.2066 173.569 89.0147C171.197 93.6178 166.323 96.7897 160.675 96.7897C156.704 96.7897 153.107 95.2166 150.502 92.6894C144.674 101.96 134.204 108.149 122.239 108.149C103.943 108.149 89.1018 93.6564 89.1018 75.7985C89.1018 75.2892 89.1139 74.7828 89.1378 74.2794C84.3793 78.3482 78.1461 80.8143 71.3213 80.8143C67.8141 80.8143 64.4489 80.1438 61.3672 78.9576C61.4317 79.5636 61.4575 80.1825 61.4575 80.8143C61.4575 91.0133 52.9863 99.2911 42.5294 99.2911C34.2645 99.2911 27.2502 94.1336 24.6586 86.9259C22.0669 89.1566 18.6758 90.5233 14.9495 90.5233C7.47113 90.5233 1.3079 85.0692 0.366653 78.0292C-4.38755 80.2968 -9.73396 81.5859 -15.3767 81.5879C-35.137 81.5811 -51.157 65.9435 -51.157 46.6457C-51.157 27.3437 -35.13 11.7035 -15.3638 11.7035C-10.1676 11.7035 -5.24215 12.7866 -0.780895 14.7335C5.75626 6.36545 16.0713 0.96295 27.6886 0.96295C35.7344 0.96295 43.1612 3.55461 49.1439 7.9385C52.8444 2.07182 59.6137 -1.8479 67.0663 -1.8479C74.5189 -1.8479 81.069 1.94288 84.8082 7.65483C86.3118 6.85116 87.9295 6.22015 89.6317 5.79129C97.5128 -6.54336 111.539 -14.7546 127.525 -14.7546C140.097 -14.7546 151.443 -9.67448 159.554 -1.5127C163.448 -4.65879 168.463 -6.55418 173.917 -6.55418C183.846 -6.55418 192.265 -0.300686 195.269 8.38974C196.965 7.85351 198.717 7.4462 200.515 7.17869C205.632 3.27588 212.073 0.950195 219.071 0.950195C230.972 0.950195 241.261 7.68076 246.161 17.4543C251.37 13.2767 258.036 10.7624 265.308 10.7624C277.055 10.7624 287.228 17.3382 292.205 26.9054C294.706 22.5113 298.325 18.8059 302.688 16.1581C303.061 14.748 303.528 13.3466 304.093 11.9613C311.378 -5.90951 332.124 -14.3421 350.433 -6.88944C355.243 -4.92958 359.408 -2.06716 362.799 1.41417C372.005 -3.87229 383.609 -4.98116 394.363 -0.597263C401.815 2.44567 407.721 7.64188 411.602 13.9598C417.249 9.92408 424.882 8.80232 431.896 11.6647Z"
            fill="#056957"
          />
          <path
            className="cloud cloud-3"
            fillRule="evenodd"
            clipRule="evenodd"
            d="M10.0498 -85C37.3349 -85 59.5503 -63.7749 60.303 -37.3137C61.2085 -37.8104 62.1526 -38.2605 63.1336 -38.6596C71.9143 -42.2441 81.4686 -40.8387 88.5215 -35.7843C93.3825 -43.6882 100.771 -50.1996 110.106 -54.0033C123.567 -59.4831 138.072 -58.0906 149.612 -51.489C153.854 -55.8471 159.064 -59.4316 165.085 -61.8814C187.997 -71.2165 213.952 -60.6565 223.068 -38.2857C223.773 -36.5565 224.357 -34.8074 224.823 -33.0473C230.254 -29.7381 234.761 -25.1176 237.883 -19.6413C244.111 -31.6197 256.85 -39.833 271.549 -39.833C280.639 -39.833 288.994 -36.6869 295.506 -31.452C301.643 -43.6883 314.511 -52.1079 329.404 -52.1079C338.163 -52.1079 346.223 -49.1973 352.626 -44.3131C354.873 -43.9794 357.062 -43.4735 359.175 -42.8115C362.953 -53.6939 373.474 -61.5204 385.891 -61.5204C392.725 -61.5204 398.991 -59.148 403.865 -55.2025C414.013 -65.4144 428.209 -71.771 443.939 -71.771C463.958 -71.771 481.516 -61.4932 491.374 -46.0466C493.506 -45.5097 495.535 -44.7196 497.423 -43.714C502.103 -50.8701 510.291 -55.615 519.626 -55.615C528.961 -55.615 537.419 -50.7153 542.061 -43.3788C549.539 -48.8586 558.836 -52.1079 568.919 -52.1079C583.45 -52.1079 596.37 -45.3386 604.557 -34.8689C610.127 -37.3058 616.303 -38.6596 622.802 -38.6596C647.545 -38.6596 667.595 -19.0868 667.595 5.06325C667.595 29.2133 647.532 48.7861 622.802 48.7861V48.799C615.723 48.799 609.044 47.1873 603.087 44.3378C601.914 53.1571 594.203 59.9651 584.843 59.9651C580.175 59.9651 575.933 58.2631 572.684 55.4651C569.447 64.4779 560.654 70.9377 550.326 70.9377C537.239 70.9377 526.64 60.584 526.64 47.8191C526.64 47.0326 526.679 46.2589 526.756 45.4982C522.901 46.9939 518.697 47.8191 514.288 47.8191C505.745 47.8191 497.942 44.7313 491.987 39.6369C492.018 40.2717 492.033 40.9104 492.033 41.5526C492.033 63.9105 473.466 82.0263 450.567 82.0263C435.597 82.0263 422.497 74.29 415.199 62.6856C411.924 65.8575 407.424 67.8173 402.46 67.8173C395.394 67.8173 389.295 63.846 386.33 58.0825C382.204 60.8289 377.214 62.4277 371.837 62.4277C358.482 62.4277 347.51 52.5268 346.179 39.8408C341.035 54.2171 327.017 64.5294 310.54 64.5294C304.196 64.5294 298.226 62.9951 292.979 60.3003C289.033 66.2701 282.161 70.2156 274.347 70.2156C263.478 70.2156 254.452 62.5954 252.544 52.5253C248.637 55.8906 243.492 57.9407 237.87 57.9407C225.621 57.9407 215.693 48.2446 215.693 36.292C215.693 35.325 215.758 34.3966 215.887 33.4683C212.405 34.5126 208.718 35.0671 204.888 35.0671C194.638 35.0671 185.345 31.0815 178.545 24.6115C179.541 32.5407 175.046 40.5257 167.122 43.7447C162.803 45.4982 158.225 45.524 154.164 44.1702C154.564 53.7374 148.865 63.0338 139.297 66.9406C127.177 71.8789 113.445 66.2959 108.636 54.4594C108.339 53.7374 108.081 53.0024 107.875 52.2675C104.871 55.1041 101.286 57.4637 97.2119 59.127C79.8956 66.1799 60.2841 58.1986 53.3988 41.3077C52.032 37.9553 51.2713 34.4869 51.0779 31.0443C50.8487 31.1128 50.6192 31.1781 50.3895 31.2403C44.7167 44.3044 31.459 53.4666 16.0068 53.4666C2.54562 53.4666 -9.26509 46.5039 -15.828 36.0599C-18.7678 38.9094 -22.8165 40.6759 -27.2906 40.6759C-33.6473 40.6759 -39.14 37.1043 -41.8091 31.9081C-45.5354 34.3837 -50.0224 35.8278 -54.8576 35.8278C-67.5193 35.8278 -77.8086 25.9383 -78.0793 13.6376C-99.0318 13.5473 -116 -3.00831 -116 -23.5352C-116 -44.0622 -98.9544 -60.7081 -77.9117 -60.7081C-73.8373 -60.7081 -69.9304 -60.0763 -66.2557 -58.9287C-62.8646 -68.7151 -53.3877 -75.768 -42.2088 -75.768C-36.0584 -75.768 -30.4238 -73.6277 -26.027 -70.0819C-16.8982 -79.2752 -4.10757 -85 10.0498 -85Z"
            fill="white"
          />
        </g>
        <defs>
          <clipPath id="clip0_117_2">
            <rect width="662" height="150" fill="white" />
          </clipPath>
        </defs>
      </svg>

      {raindrops.map((drop, index) => (
        <svg
          key={index}
          className="rain__drop"
          preserveAspectRatio="xMinYMin"
          viewBox="0 0 5 50"
          style={
            {
              "--x": drop.x,
              "--y": drop.y,
              "--o": drop.o,
              "--a": drop.a,
              "--d": drop.d,
              "--s": drop.s,
            } as React.CSSProperties
          }
        >
          <path
            stroke="none"
            d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"
          />
        </svg>
      ))}
    </div>
  );
};

export default Rain;
